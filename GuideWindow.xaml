<Window x:Class="HayChonGiaDung.Wpf.GuideWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="HƯỚNG DẪN"
        WindowStartupLocation="CenterOwner"
        WindowState="Maximized"
        Background="{StaticResource Surface}"
        KeyDown="Window_KeyDown">

    <!-- === High-Contrast Local Theme === -->
    <Window.Resources>
        <!-- Nền & card (đậm hơn để tăng contrast) -->
        <SolidColorBrush x:Key="Surface" Color="#0B1220"/>
        <SolidColorBrush x:Key="Card"    Color="#0E1A2B"/>

        <!-- Chữ -->
        <SolidColorBrush x:Key="TextPrimary"   Color="#FFFFFF"/>
        <SolidColorBrush x:Key="TextSecondary" Color="#D1D5DB"/>

        <!-- Accent & nút -->
        <SolidColorBrush x:Key="Accent"           Color="#22C55E"/>
        <!-- green 600 -->
        <SolidColorBrush x:Key="AccentHover"      Color="#34D399"/>
        <!-- green 400 -->
        <SolidColorBrush x:Key="AccentPressed"    Color="#16A34A"/>
        <!-- green 700 -->
        <SolidColorBrush x:Key="OnAccent"         Color="#0B1220"/>
        <!-- text trên nút -->

        <!-- Callouts (chú ý) -->
        <SolidColorBrush x:Key="InfoBg"     Color="#E0F2FE"/>
        <!-- sky-100 -->
        <SolidColorBrush x:Key="InfoText"   Color="#075985"/>
        <!-- sky-800 -->
        <SolidColorBrush x:Key="WarnBg"     Color="#FEE2E2"/>
        <!-- rose-100 -->
        <SolidColorBrush x:Key="WarnText"   Color="#991B1B"/>
        <!-- rose-800 -->
        <SolidColorBrush x:Key="TipBg"      Color="#F1F5F9"/>
        <!-- slate-100 -->
        <SolidColorBrush x:Key="TipText"    Color="#0F172A"/>
        <!-- slate-900 -->

        <!-- Text mặc định -->
        <Style TargetType="TextBlock">
            <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
        </Style>

        <!-- Nút primary tương phản cao -->
        <Style TargetType="Button" x:Key="PrimaryButton">
            <Setter Property="Foreground" Value="{StaticResource OnAccent}"/>
            <Setter Property="Background" Value="{StaticResource Accent}"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Padding" Value="12,8"/>
            <Setter Property="MinHeight" Value="36"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="bd" CornerRadius="10" Background="{TemplateBinding Background}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="bd" Property="Background" Value="{StaticResource AccentHover}"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="bd" Property="Background" Value="{StaticResource AccentPressed}"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="bd" Property="Opacity" Value="0.6"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Callout style: Info / Warn / Tip -->
        <Style TargetType="Border" x:Key="CalloutInfo">
            <Setter Property="CornerRadius" Value="10"/>
            <Setter Property="Padding" Value="12"/>
            <Setter Property="Background" Value="{StaticResource InfoBg}"/>
            <Setter Property="BorderBrush" Value="{StaticResource InfoText}"/>
            <Setter Property="BorderThickness" Value="1"/>
        </Style>
        <Style TargetType="Border" x:Key="CalloutWarn">
            <Setter Property="CornerRadius" Value="10"/>
            <Setter Property="Padding" Value="12"/>
            <Setter Property="Background" Value="{StaticResource WarnBg}"/>
            <Setter Property="BorderBrush" Value="{StaticResource WarnText}"/>
            <Setter Property="BorderThickness" Value="1"/>
        </Style>
        <Style TargetType="Border" x:Key="CalloutTip">
            <Setter Property="CornerRadius" Value="10"/>
            <Setter Property="Padding" Value="12"/>
            <Setter Property="Background" Value="{StaticResource TipBg}"/>
            <Setter Property="BorderBrush" Value="{StaticResource TipText}"/>
            <Setter Property="BorderThickness" Value="1"/>
        </Style>
    </Window.Resources>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <DockPanel Grid.Row="0" Margin="0,0,0,10">
            <StackPanel Orientation="Vertical" DockPanel.Dock="Left">
                <TextBlock Text="HƯỚNG DẪN" FontSize="34" FontWeight="Bold"/>
                <TextBlock Text="Luật chơi • Điều khiển • Điểm thưởng • FAQ" Foreground="{StaticResource TextSecondary}"/>
            </StackPanel>
           
        </DockPanel>

        <!-- Main -->
        <Border Grid.Row="1" Background="{StaticResource Card}" CornerRadius="18" Padding="16">
            <TabControl x:Name="Tabs" Margin="4" Background="Transparent" BorderThickness="0">
                <TabControl.Resources>
                    <Style TargetType="TabItem">
                        <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
                        <Setter Property="FontWeight" Value="SemiBold"/>
                        <Setter Property="Padding" Value="20,10"/>
                        <Setter Property="Margin" Value="0,0,8,0"/>
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="TabItem">
                                    <Border x:Name="tabBorder"
                                            CornerRadius="10"
                                            Background="{StaticResource Card}"
                                            Padding="{TemplateBinding Padding}">
                                        <ContentPresenter x:Name="contentPresenter"
                                                          ContentSource="Header"
                                                          RecognizesAccessKey="True"
                                                          HorizontalAlignment="Center"
                                                          VerticalAlignment="Center"
                                                          TextElement.Foreground="{TemplateBinding Foreground}"/>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsSelected" Value="True">
                                            <Setter TargetName="tabBorder" Property="Background" Value="{StaticResource Accent}"/>
                                            <Setter TargetName="contentPresenter" Property="TextElement.Foreground" Value="{StaticResource OnAccent}"/>
                                        </Trigger>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter TargetName="tabBorder" Property="Background" Value="{StaticResource AccentHover}"/>
                                            <Setter TargetName="contentPresenter" Property="TextElement.Foreground" Value="{StaticResource OnAccent}"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </TabControl.Resources>
                <!-- Luật chơi -->
                <TabItem Background="Transparent" Header="Luật chơi">
                    <ScrollViewer Padding="8">
                        <StackPanel>
                            <TextBlock Text="Tổng quan" FontSize="20" FontWeight="Bold" Margin="0,0,0,6"/>
                            <TextBlock TextWrapping="Wrap" Foreground="{StaticResource TextSecondary}">
                Hành trình gồm vòng Khởi động và 5 vòng chính cho 1 người chơi. Thua ở vòng nào sẽ dừng tại đó và giữ nguyên số tiền đã tích lũy.
                            </TextBlock>

                            <Separator Margin="0,12,0,12"/>
                            <TextBlock Text="Vòng Khởi Động" FontSize="18" FontWeight="Bold"/>
                            <TextBlock TextWrapping="Wrap" Margin="0,4,0,0" Foreground="{StaticResource TextSecondary}">
                Trả lời tối đa 6 câu trắc nghiệm, mỗi câu đúng nhận +2 xu và trả lời sai bị trừ 2 xu (không âm). Hoàn thành phần hỏi để vào cửa hàng đổi xu lấy thẻ trợ giúp (Gợi ý, Đổi sản phẩm, Nhân đôi) dùng ở các vòng sau.
                            </TextBlock>

                            <Separator Margin="0,12,0,12"/>
                            <TextBlock Text="Vòng 1 – Bàn Tay Vàng" FontSize="18" FontWeight="Bold"/>
                            <TextBlock TextWrapping="Wrap" Margin="0,4,0,0" Foreground="{StaticResource TextSecondary}">
                Gồm 10 lượt. Mỗi lượt hiển thị giá ẩn (dao động ±20%) của 1 sản phẩm nhân số lượng. Chọn “CAO HƠN” hay “THẤP HƠN” so với giá thật. Mỗi câu đúng đổi được 1 lượt đục bảng thưởng Punch Board ở cuối vòng.
                            </TextBlock>

                            <Separator Margin="0,12,0,12"/>
                            <TextBlock Text="Vòng 2 – Đếm Ngược" FontSize="18" FontWeight="Bold"/>
                            <TextBlock TextWrapping="Wrap" Margin="0,4,0,0" Foreground="{StaticResource TextSecondary}">
                Mở đầu bằng thử thách chọn sản phẩm rẻ nhất/đắt nhất để nhận thêm +10 giây. Sau đó có 60 giây (cộng thêm nếu vừa thắng thử thách) để đoán 4 chữ số giá (đơn vị nghìn). Sai sẽ được gợi ý từng chữ số bằng ‘&lt;’, ‘&gt;’, ‘=’. Trả lời đúng trong thời gian sẽ vượt vòng.
                            </TextBlock>

                            <Separator Margin="0,12,0,12"/>
                            <TextBlock Text="Vòng 3 – Không Mà Có" FontSize="18" FontWeight="Bold"/>
                            <TextBlock TextWrapping="Wrap" Margin="0,4,0,0" Foreground="{StaticResource TextSecondary}">
                Hiển thị 6 sản phẩm, trong đó 1 món có giá sai lệch mạnh (±30–60%). Chọn đúng sản phẩm sai giá để tiếp tục.
                            </TextBlock>

                            <Separator Margin="0,12,0,12"/>
                            <TextBlock Text="Vòng 4 – Lựa Chọn Thông Minh" FontSize="18" FontWeight="Bold"/>
                            <TextBlock TextWrapping="Wrap" Margin="0,4,0,0" Foreground="{StaticResource TextSecondary}">
                3 sản phẩm có giá cận kề. Nhiệm vụ là chọn sản phẩm có giá TRUNG BÌNH (median). Hoàn thành vòng sẽ ghi nhận thành tích lên bảng xếp hạng.
                            </TextBlock>

                            <Separator Margin="0,12,0,12"/>
                            <TextBlock Text="Vòng 5 – Xếp Hạng Cuối" FontSize="18" FontWeight="Bold"/>
                            <TextBlock TextWrapping="Wrap" Margin="0,4,0,0" Foreground="{StaticResource TextSecondary}">
                Kéo thả 3–5 sản phẩm theo giá tăng dần, đánh dấu 1 sản phẩm để “bảo vệ” nếu đoán sai. Khi chốt kết quả sẽ lật đáp án, cộng tiền thưởng và cập nhật bảng xếp hạng.
                            </TextBlock>

                        </StackPanel>
                    </ScrollViewer>
                </TabItem>

                <!-- Điều khiển -->
                <TabItem Background="Transparent" Header="Điều khiển">
                    <ScrollViewer Padding="8">
                        <StackPanel>
                            <TextBlock Text="Chuột và Bàn phím" FontSize="20" FontWeight="Bold" Margin="0,0,0,6"/>
                            <TextBlock TextWrapping="Wrap" Foreground="{StaticResource TextSecondary}">
                • Dùng chuột click các nút hành động trên màn hình.
                • Vòng Khởi Động: chọn đáp án (A-D) rồi nhấn “Trả lời” hoặc phím Enter.
                • Vòng 5: kéo thả để sắp xếp thứ tự sản phẩm, tích “Bảo vệ” cho 1 sản phẩm trước khi chốt.
                            </TextBlock>

                            <Border Style="{StaticResource CalloutInfo}" Margin="0,10,0,0">
                                <TextBlock Foreground="{StaticResource InfoText}" TextWrapping="Wrap">
                  Hotkey vòng 1: <Bold>↑ / A</Bold> = CAO HƠN, <Bold>↓ / D</Bold> = THẤP HƠN.{"\n"}
                  Vòng 2: gõ 4 chữ số, nhấn <Bold>Enter</Bold> hoặc nút “Kiểm tra”.{"\n"}
                  Vòng 5: giữ chuột trái để kéo, thả vào vị trí mới rồi nhấn “Chốt kết quả”.
                                </TextBlock>
                            </Border>
                        </StackPanel>
                    </ScrollViewer>
                </TabItem>

                <!-- Điểm thưởng -->
                <TabItem Background="Transparent" Header="Điểm thưởng">
                    <ScrollViewer Padding="8">
                        <StackPanel>
                            <TextBlock Text="Bảng thưởng" FontSize="20" FontWeight="Bold" Margin="0,0,0,6"/>
                            <StackPanel Margin="0,4,0,0">
                                <TextBlock TextWrapping="Wrap" Foreground="{StaticResource TextSecondary}" Margin="0,0,0,6" Text="• Vòng Khởi Động: mỗi câu đúng +2 xu, trả lời sai -2 xu (tối thiểu 0 xu), dùng để mua thẻ trợ giúp."/>
                                <TextBlock TextWrapping="Wrap" Foreground="{StaticResource TextSecondary}" Margin="0,0,0,6" Text="• Vòng 1: mỗi lượt đục bảng có thể nhận 0 ₫ đến 5.000.000 ₫ tuỳ ô thưởng mở ra."/>
                                <TextBlock TextWrapping="Wrap" Foreground="{StaticResource TextSecondary}" Margin="0,0,0,6" Text="• Vòng 2: +1.000.000 ₫ khi đoán đúng giá (nhân đôi nếu kích hoạt thẻ Nhân đôi). Thử thách chọn sản phẩm chỉ thưởng thêm thời gian."/>
                                <TextBlock TextWrapping="Wrap" Foreground="{StaticResource TextSecondary}" Margin="0,0,0,6" Text="• Vòng 3: +1.500.000 ₫ nếu tìm đúng sản phẩm sai giá."/>
                                <TextBlock TextWrapping="Wrap" Foreground="{StaticResource TextSecondary}" Margin="0,0,0,6" Text="• Vòng 4: +2.000.000 ₫ nếu chọn đúng sản phẩm có giá trung bình."/>
                                <TextBlock TextWrapping="Wrap" Foreground="{StaticResource TextSecondary}" Text="• Vòng 5: +700.000 ₫ cho mỗi sản phẩm đứng đúng vị trí (nhân đôi khi đã kích hoạt thẻ). Sản phẩm được “bảo vệ” nhưng xếp sai vẫn nhận +300.000 ₫."/>
                            </StackPanel>


                        </StackPanel>
                    </ScrollViewer>
                </TabItem>

               
            </TabControl>
        </Border>

        <!-- Footer -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
            <TextBlock Text="Nhấn Esc để đóng nhanh" Foreground="{StaticResource TextSecondary}"
                 VerticalAlignment="Center" Margin="0,0,12,0"/>
            <Button Content="Đóng" Style="{StaticResource PrimaryButton}" Click="Close_Click" MinWidth="100"/>
        </StackPanel>

        <!-- Fade-in -->
        <Grid.Triggers>
            <EventTrigger RoutedEvent="Loaded">
                <BeginStoryboard>
                    <Storyboard>
                        <DoubleAnimation Storyboard.TargetProperty="Opacity" From="0" To="1" Duration="0:0:0.25"/>
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger>
        </Grid.Triggers>
    </Grid>
</Window>
